(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[459],{83236:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return n(30933)}])},55938:function(e,t){"use strict";t.Z={src:"/_next/static/media/1.9cedb218.png",height:500,width:500,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAuElEQVR42mOAgf8N6qxPsxS0QPh/swYrXKLJRpAFSqfUWAreBmEgOwkuV2khAFINovuqLAT+gzCQ3QMUgshVQRUA6UlAgflAvBDInggUgsjVWwkygzgN1oIhQCNnA/EsIDsAJFZvDZTrchBiBOpSm+Iiwn0wUopjjoeoSJudkCRQTKXRWpCRAQSqLQXsgMalAQVTKywEwoDsvGoLgZQqqBtEgFgaKCBbYykgBcTiQLZkFZBfZSEgDABZLDksbL1UxAAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:8}},30933:function(e,t,n){"use strict";n.r(t);var r=n(85893),a=n(57712),s=n(13403),i=n(26725),o=n(51244),l=n(453),c=n(82175),u=n(11163);n(67294);var d=n(25675),m=n.n(d),h=n(33299),f=n(55938);let g=()=>{let{data:e,status:t}=(0,h.useSession)(),n=(0,u.useRouter)(),{isAuthenticated:d,login:g,logout:p}=(0,a.aC)(),x=async e=>{try{let t=await (0,s.i)(e);console.log(t),t.id?(localStorage.setItem("_user",JSON.stringify(t)),localStorage.setItem("_token",t.token),(0,i.h4)("success","Bienvenid@ "+t.name),n.push("/home"),g()):(0,i.h4)("error",t.error)}catch(e){(0,i.h4)("error","Ha ocurrido un error"),console.error(e)}};if("authenticated"===t&&e){var A,v;let t={email:null===(A=e.user)||void 0===A?void 0:A.email,password:(null==e?void 0:null===(v=e.user)||void 0===v?void 0:v.name)||""};x(t)}return(0,r.jsx)("section",{id:"content",className:"content",children:(0,r.jsx)("div",{className:"content__boxed w-100 min-vh-100 d-flex flex-column align-items-center justify-content-center login-image",children:(0,r.jsx)("div",{className:"content__wrap",children:(0,r.jsxs)("div",{className:"card shadow-lg",style:{minWidth:"350px"},children:[(0,r.jsx)("div",{className:"d-flex align-items-center justify-content-center gap-3 mb-3",style:{marginTop:"20px"},children:(0,r.jsx)(m(),{src:f.Z.src,alt:"Ulsa Logo",width:150,height:150})}),(0,r.jsxs)("div",{className:"card-body",children:[(0,r.jsx)("div",{className:"text-center",children:(0,r.jsx)("h3",{className:"font",children:"Iniciar sesi\xf3n"})}),(0,r.jsx)(c.J9,{initialValues:o.z,validationSchema:l.d,onSubmit:x,children:e=>(0,r.jsxs)("form",{className:"mt-4",onSubmit:e.handleSubmit,children:[(0,r.jsx)("div",{className:"mb-3",children:(0,r.jsx)("input",{style:{fontSize:15},type:"text",className:"form-control",name:"email",value:e.values.email,onChange:e.handleChange,placeholder:"Email"})}),(0,r.jsx)("div",{className:"mb-3",children:(0,r.jsx)("input",{style:{fontSize:15},type:"password",name:"password",value:e.values.password,onChange:e.handleChange,className:"form-control",placeholder:"Contrase\xf1a"})}),(0,r.jsx)("div",{className:"d-grid mt-5",children:(0,r.jsx)("button",{className:"btn btn-primary btn-lg",type:"submit",children:"Iniciar sesi\xf3n"})})]})}),(0,r.jsx)("div",{className:"d-flex justify-content-between mt-4",children:(0,r.jsx)("a",{href:"#",className:"btn-link text-decoration-none",style:{fontSize:10},children:"\xbfOlvidaste tu contrase\xf1a?"})}),(0,r.jsx)("div",{className:"d-flex align-items-center justify-content-between border-top pt-3 mt-3"})]})]})})})})};t.default=g},13403:function(e,t,n){"use strict";n.d(t,{R:function(){return i},i:function(){return s}});var r=n(9234);let a="auth";async function s(e){let t=await r.Z.post(a+"/login",e);return t.data}async function i(e){let t=await r.Z.post(a+"/register-public",e);return t.data}},9234:function(e,t,n){"use strict";n.d(t,{D:function(){return i}});var r=n(6154),a=n(26725);let s=r.Z.create({baseURL:a.CC,headers:{"Content-Type":"application/json"}});s.interceptors.request.use(function(e){{let t=localStorage.getItem("_token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}},function(e){return console.log("error"),Promise.reject(e)});let i=r.Z.create({baseURL:a.CC,headers:{"Content-Type":"multipart/form-data"}});i.interceptors.request.use(function(e){let t=localStorage.getItem("_token");return e.headers["Content-Type"]="multipart/form-data",t&&(e.headers["Content-Type"]="multipart/form-data",e.headers.Authorization="Bearer ".concat(t)),e},function(e){return Promise.reject(e)}),t.Z=s},51244:function(e,t,n){"use strict";n.d(t,{m:function(){return a},z:function(){return r}});let r={email:"",password:""},a={name:"",email:"",password:""}},453:function(e,t,n){"use strict";n.d(t,{d:function(){return a},g:function(){return s}});var r=n(16310);let a=r.Ry({email:r.Z_().email("Invalid email address").required("Required"),password:r.Z_().required("Required")}),s=r.Ry({name:r.Z_().required("Required"),email:r.Z_().email("Invalid email address").required("Required"),password:r.Z_().required("Required")})}},function(e){e.O(0,[873,376,774,888,179],function(){return e(e.s=83236)}),_N_E=e.O()}]);