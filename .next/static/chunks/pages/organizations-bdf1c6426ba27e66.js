(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[923],{84477:function(e,r,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/organizations",function(){return a(45068)}])},52627:function(e,r,a){"use strict";var n=a(85893);a(67294);var t=a(37690),o=a(48678),i=a(98396);let l=e=>{let{data:r,columns:a,buttons:l}=e,s=(0,o.Z)();return(0,i.Z)(s.breakpoints.only("xs")),(0,i.Z)(s.breakpoints.down("sm")),(0,i.Z)(s.breakpoints.only("md")),(0,i.Z)(s.breakpoints.only("lg")),(0,i.Z)(s.breakpoints.only("xl")),(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{style:{width:"100%"},children:(0,n.jsx)(t.ZP,{title:"",data:r,columns:a,options:{textLabels:{body:{noMatch:"No se encontr\xf3 informaci\xf3n",toolTip:"Ordenar"},pagination:{next:"Siguiente",previous:"Anterior",rowsPerPage:"Filas por p\xe1gina:",displayRows:"de"},toolbar:{search:"Buscar",downloadCsv:"Descargar CSV",print:"Imprimir",viewColumns:"Vista de columnas",filterTable:"Filtro"},filter:{all:"Todos",title:"Filtros",reset:"Reestablecer"},viewColumns:{title:"Mostrar Columnas",titleAria:"Mostrar/Ocultar Columnas de tabla"},selectedRows:{text:"Filas seleccionadas",delete:"Borrar",deleteAria:"Borrar columnas seleccionadas"}},elevation:0,responsive:"simple",customToolbar:()=>(0,n.jsx)(n.Fragment,{children:l}),selectableRowsHideCheckboxes:!0}})})})};r.Z=l},45068:function(e,r,a){"use strict";a.r(r),a.d(r,{default:function(){return E}});var n=a(85893),t=a(67294),o=a(52972),i=a(5235),l=a(42992),s=a(23972),c=a(8364),d=a(5863),u=a(75071),m=a(41687),x=a(52627),h=a(26725),b=a(9234);let f="/organizacion";async function p(){try{let e=await b.Z.get(f+"/");return{state:!0,data:e.data,error:""}}catch(e){return{state:!1,data:[],error:e}}}async function j(e){try{let r=await b.Z.post(f+"/",e);return{state:!0,data:r,error:""}}catch(e){return{state:!1,data:[],error:e}}}async function g(e,r){try{let a=await b.Z.patch(f+"/"+e,r);return{state:!0,data:a,error:""}}catch(e){return{state:!1,data:[],error:e}}}async function y(e){try{let r=await b.Z.delete(f+"/"+e);return{state:!0,data:r,error:""}}catch(e){return{state:!1,data:[],error:e}}}var Z=a(82175),_=a(16310),v=a(50657),C=a(37645),w=a(6514),N=a(18571),T=a(31425);let k=e=>{let{type:r,organization:a,updateTable:o,open:i,handleClose:s}=e,c=_.Ry().shape({nombre:_.Z_().required("Nombre requerido"),nombre_dueno:_.Z_().required("Nombre del due\xf1o requerido"),direccion:_.Z_().required("Direcci\xf3n requerida"),correo:_.Z_().email("Email inv\xe1lido").required("Email requerido"),telefono:_.Z_().required("El n\xfamero de tel\xe9fono es obligatorio").matches(h.Oj,"El n\xfamero de tel\xe9fono debe ser un n\xfamero de 10 d\xedgitos sin espacios ni guiones")});(0,t.useEffect)(()=>{},[i]);let d=async(e,n)=>{let t={...e,id:a?a.id:null};try{"create"===r&&(await j(t),(0,h.h4)("success","Se ha creado exitosamente")),"edit"===r&&(await g(a.id,t),(0,h.h4)("success","Se ha actualizado")),o(),s()}catch(e){(0,h.h4)("error","Ha sucedido un error")}};return(0,n.jsx)("div",{children:(0,n.jsxs)(v.Z,{open:i,onClose:s,maxWidth:"md",fullWidth:!0,children:[(0,n.jsx)(C.Z,{children:"Organizaci\xf3n"}),(0,n.jsx)(Z.J9,{initialValues:{nombre:a?a.nombre:"",nombre_dueno:a?a.nombre_dueno:"",direccion:a?a.direccion:"",correo:a?a.correo:"",telefono:a?a.telefono:""},validationSchema:c,onSubmit:d,children:e=>{let{isSubmitting:a,errors:t,touched:o,handleChange:i,values:c}=e;return(0,n.jsxs)(Z.l0,{children:[(0,n.jsxs)(w.Z,{children:[(0,n.jsx)(Z.gN,{as:N.Z,disabled:"view"==r,name:"nombre",label:"Nombre",fullWidth:!0,variant:"outlined",margin:"normal",helperText:o.nombre&&t.nombre?(0,n.jsx)(Z.Bc,{name:"name"}):"",error:!!o.nombre&&!!t.nombre,onChange:i}),(0,n.jsx)(Z.gN,{as:N.Z,disabled:"view"==r,type:"text",name:"nombre_dueno",label:"Nombre del due\xf1o",fullWidth:!0,variant:"outlined",margin:"normal",helperText:o.nombre_dueno&&t.nombre_dueno?(0,n.jsx)(Z.Bc,{name:"email"}):"",error:!!o.nombre_dueno&&!!t.nombre_dueno,onChange:i}),(0,n.jsx)("textarea",{disabled:!1,style:{fontSize:"1rem"},className:"form-control",name:"direccion",value:c.direccion,rows:3,placeholder:"Direcci\xf3n",onChange:i}),(0,n.jsx)(Z.gN,{as:N.Z,disabled:"view"==r,type:"text",name:"correo",label:"Email",fullWidth:!0,variant:"outlined",margin:"normal",helperText:o.correo&&t.correo?(0,n.jsx)(Z.Bc,{name:"email"}):"",error:!!o.correo&&!!t.correo,onChange:i}),(0,n.jsx)(Z.gN,{as:N.Z,disabled:"view"==r,type:"text",name:"telefono",label:"Tel\xe9fono",fullWidth:!0,variant:"outlined",margin:"normal",helperText:o.telefono&&t.telefono?(0,n.jsx)(Z.Bc,{name:"email"}):"",error:!!o.telefono&&!!t.telefono,onChange:i})]}),(0,n.jsxs)(T.Z,{children:[(0,n.jsx)(l.Z,{onClick:s,color:"primary",children:"Cancelar"}),(0,n.jsx)(l.Z,{type:"submit",color:"primary",disabled:a,children:"Guardar"})]})]})}})]})})},S=()=>{let[e,r]=(0,t.useState)([]),[a,i]=(0,t.useState)(!1),[b,f]=(0,t.useState)(),[j,g]=(0,t.useState)(""),[Z,_]=(0,t.useState)(""),v=()=>{i(!0)},C=()=>{i(!1)},w=async()=>{g("create"),f(null),v()},N=async e=>{g("view"),f(e),v()},T=async e=>{g("edit"),f(e),v()},S=async e=>{let r=e.id;try{await y(r),E(),(0,h.h4)("success","Se ha eliminado")}catch(e){(0,h.h4)("success","Error al eliminar")}};(0,t.useEffect)(()=>{E()},[]);let E=async()=>{let{data:e,state:a,error:n}=await p();a?r(e):(r([]),_(n.message))};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.Z,{children:(0,n.jsx)("div",{className:"content__header content__boxed overlapping",children:(0,n.jsx)("div",{className:"content__wrap",children:(0,n.jsx)("div",{className:"content__header content__boxed overlapping",children:(0,n.jsxs)("div",{className:"content__wrap",children:[(0,n.jsx)("nav",{"aria-label":"breadcrumb",children:(0,n.jsx)("ol",{className:"mb-0",style:{margin:0,padding:0},children:(0,n.jsx)("li",{className:"breadcrumb-item active font",style:{listStyle:"none"},"aria-current":"page",children:(0,n.jsx)(s.Z,{sx:{fontWeight:"bolder"},mb:1,children:"ORGANIZACIONES"})})})}),(0,n.jsx)("div",{className:"content__boxed",children:(0,n.jsx)("div",{className:"card",children:(0,n.jsx)("div",{className:"card-body flex-fill ms-md-4",children:(0,n.jsx)(x.Z,{data:e,columns:[{name:"nombre",label:"Nombre"},{name:"nombre_dueno",label:"Titular"},{name:"direccion",label:"Direcci\xf3n"},{name:"correo",label:"Correo"},{name:"telefono",label:"Tel\xe9fono"},{name:"Acciones",Label:"Acciones",options:{customBodyRenderLite:r=>{let a=e[r];return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"d-flex gap-3",children:[(0,n.jsx)(l.Z,{variant:"text",color:"primary",onClick:()=>T(a),children:(0,n.jsx)(u.Z,{})}),(0,n.jsx)(l.Z,{variant:"text",color:"primary",onClick:()=>N(a),children:(0,n.jsx)(d.Z,{})}),(0,n.jsx)(l.Z,{color:"error",onClick:()=>S(a),children:(0,n.jsx)(c.Z,{})})]})})}}}],buttons:(0,n.jsx)(l.Z,{variant:"contained",color:"primary",className:"ms-2",onClick:w,children:(0,n.jsx)(m.Z,{})})})})})})]})})})})}),(0,n.jsx)(k,{type:j,organization:b,updateTable:E,open:a,handleClose:C})]})};var E=(0,i.default)(S)},9234:function(e,r,a){"use strict";a.d(r,{D:function(){return i}});var n=a(6154),t=a(26725);let o=n.Z.create({baseURL:t.CC,headers:{"Content-Type":"application/json"}});o.interceptors.request.use(function(e){{let r=localStorage.getItem("_token");return r&&(e.headers.Authorization="Bearer ".concat(r)),e}},function(e){return console.log("error"),Promise.reject(e)});let i=n.Z.create({baseURL:t.CC,headers:{"Content-Type":"multipart/form-data"}});i.interceptors.request.use(function(e){let r=localStorage.getItem("_token");return e.headers["Content-Type"]="multipart/form-data",r&&(e.headers["Content-Type"]="multipart/form-data",e.headers.Authorization="Bearer ".concat(r)),e},function(e){return Promise.reject(e)}),r.Z=o}},function(e){e.O(0,[664,873,376,672,95,542,44,254,774,888,179],function(){return e(e.s=84477)}),_N_E=e.O()}]);