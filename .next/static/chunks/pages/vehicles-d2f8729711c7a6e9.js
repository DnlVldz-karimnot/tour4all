(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[590],{38094:function(e,r,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/vehicles",function(){return a(60157)}])},52627:function(e,r,a){"use strict";var t=a(85893);a(67294);var n=a(37690),l=a(48678),s=a(98396);let o=e=>{let{data:r,columns:a,buttons:o}=e,i=(0,l.Z)();return(0,s.Z)(i.breakpoints.only("xs")),(0,s.Z)(i.breakpoints.down("sm")),(0,s.Z)(i.breakpoints.only("md")),(0,s.Z)(i.breakpoints.only("lg")),(0,s.Z)(i.breakpoints.only("xl")),(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("div",{style:{width:"100%"},children:(0,t.jsx)(n.ZP,{title:"",data:r,columns:a,options:{textLabels:{body:{noMatch:"No se encontr\xf3 informaci\xf3n",toolTip:"Ordenar"},pagination:{next:"Siguiente",previous:"Anterior",rowsPerPage:"Filas por p\xe1gina:",displayRows:"de"},toolbar:{search:"Buscar",downloadCsv:"Descargar CSV",print:"Imprimir",viewColumns:"Vista de columnas",filterTable:"Filtro"},filter:{all:"Todos",title:"Filtros",reset:"Reestablecer"},viewColumns:{title:"Mostrar Columnas",titleAria:"Mostrar/Ocultar Columnas de tabla"},selectedRows:{text:"Filas seleccionadas",delete:"Borrar",deleteAria:"Borrar columnas seleccionadas"}},elevation:0,responsive:"simple",customToolbar:()=>(0,t.jsx)(t.Fragment,{children:o}),selectableRowsHideCheckboxes:!0}})})})};r.Z=o},60157:function(e,r,a){"use strict";a.r(r),a.d(r,{default:function(){return P}});var t=a(85893),n=a(67294),l=a(52972),s=a(5235),o=a(42992),i=a(23972),c=a(8364),d=a(5863),u=a(75071),m=a(41687),b=a(52627),h=a(26725),x=a(82175),p=a(16310),y=a(50657),f=a(37645),v=a(6514),j=a(18571),g=a(31425),Z=a(9234);let N="/vehicle";async function C(){try{let e=await Z.Z.get(N+"/");return{state:!0,data:e.data,error:""}}catch(e){return{state:!1,data:[],error:e}}}async function S(e){try{let r=await Z.Z.post(N+"/",e);return{state:!0,data:r,error:""}}catch(e){return{state:!1,data:[],error:e}}}async function _(e,r){try{let a=await Z.Z.patch(N+"/"+e,r);return{state:!0,data:a,error:""}}catch(e){return{state:!1,data:[],error:e}}}async function w(e){try{let r=await Z.Z.delete(N+"/"+e);return{state:!0,data:r,error:""}}catch(e){return{state:!1,data:[],error:e}}}var k=a(5336);let T=e=>{var r;let{type:a,alumno:l,updateTable:s,open:i,handleClose:c}=e,[d,u]=(0,n.useState)([]),[m,b]=(0,n.useState)((null==l?void 0:l.companyId)||"");(0,n.useEffect)(()=>{var e;b((null==l?void 0:null===(e=l.company)||void 0===e?void 0:e.id)||"")},[i]);let Z=p.Ry().shape({brand:p.Z_().required("Marca es requerida"),model:p.Z_().required("Modelo es requerido"),year:p.Rx().required("A\xf1o es requerido"),licensePlate:p.Z_().required("Matr\xedcula es requerida"),numberDoors:p.Rx().required("N\xfamero de puertas es requerido"),numberSeats:p.Rx().required("N\xfamero de asientos es requerido"),kilometers:p.Rx().required("Kil\xf3metros es requerido"),type:p.Z_().required("Tipo de combustible es requerido")}),N={brand:(null==l?void 0:l.brand)||"",model:(null==l?void 0:l.model)||"",year:(null==l?void 0:l.year)||"",licensePlate:(null==l?void 0:l.licensePlate)||"",numberDoors:(null==l?void 0:l.numberDoors)||"",numberSeats:(null==l?void 0:l.numberSeats)||"",kilometers:(null==l?void 0:l.kilometers)||"",type:(null==l?void 0:l.type)||"",companyId:(null==l?void 0:null===(r=l.company)||void 0===r?void 0:r.id)||""},C=async(e,r)=>{let t=null;if("view"!==a)try{"create"===a&&(t={...e,year:Number(e.year),numberDoors:Number(e.numberDoors),numberSeats:Number(e.numberSeats),kilometers:Number(e.kilometers),companyId:m||-1},await S(t),(0,h.h4)("success","Se ha creado exitosamente")),"edit"===a&&(t={...e,year:Number(e.year),numberDoors:Number(e.numberDoors),numberSeats:Number(e.numberSeats),kilometers:Number(e.kilometers),companyId:m||-1},await _(l.id,t),(0,h.h4)("success","Se ha actualizado")),s(),c()}catch(e){(0,h.h4)("error","Ha sucedido un error")}},w=async()=>{try{let e=await (0,k.r7)();u(e.data.data)}catch(e){(0,h.h4)("error","Ha sucedido un error")}};return(0,n.useEffect)(()=>{w()},[]),(0,t.jsx)("div",{children:(0,t.jsxs)(y.Z,{open:i,onClose:c,maxWidth:"md",fullWidth:!0,children:[(0,t.jsx)(f.Z,{children:"Alumnos"}),(0,t.jsx)(x.J9,{initialValues:N,validationSchema:Z,onSubmit:C,children:e=>{let{isSubmitting:r,errors:a,touched:n,handleChange:l,values:s}=e;return(0,t.jsxs)(x.l0,{children:[(0,t.jsxs)(v.Z,{children:[(0,t.jsx)(x.gN,{as:j.Z,disabled:!1,name:"brand",label:"Marca",fullWidth:!0,variant:"outlined",margin:"normal",helperText:n.brand&&a.brand?(0,t.jsx)(x.Bc,{name:"brand"}):"",error:!!n.brand&&!!a.brand,onChange:l}),(0,t.jsx)(x.gN,{as:j.Z,disabled:!1,name:"model",label:"Modelo",fullWidth:!0,variant:"outlined",margin:"normal",helperText:n.model&&a.model?(0,t.jsx)(x.Bc,{name:"model"}):"",error:!!n.model&&!!a.model,onChange:l}),(0,t.jsx)(x.gN,{as:j.Z,disabled:!1,name:"year",label:"A\xf1o",fullWidth:!0,variant:"outlined",margin:"normal",helperText:n.year&&a.year?(0,t.jsx)(x.Bc,{name:"year"}):"",error:!!n.year&&!!a.year,onChange:l}),(0,t.jsx)(x.gN,{as:j.Z,disabled:!1,name:"licensePlate",label:"Matr\xedcula",fullWidth:!0,variant:"outlined",margin:"normal",helperText:n.licensePlate&&a.licensePlate?(0,t.jsx)(x.Bc,{name:"licensePlate"}):"",error:!!n.licensePlate&&!!a.licensePlate,onChange:l}),(0,t.jsx)(x.gN,{as:j.Z,disabled:!1,name:"numberDoors",label:"N\xfamero de puertas",fullWidth:!0,variant:"outlined",margin:"normal",helperText:n.numberDoors&&a.numberDoors?(0,t.jsx)(x.Bc,{name:"numberDoors"}):"",error:!!n.numberDoors&&!!a.numberDoors,onChange:l}),(0,t.jsx)(x.gN,{as:j.Z,disabled:!1,name:"numberSeats",label:"N\xfamero de asientos",fullWidth:!0,variant:"outlined",margin:"normal",helperText:n.numberSeats&&a.numberSeats?(0,t.jsx)(x.Bc,{name:"numberSeats"}):"",error:!!n.numberSeats&&!!a.numberSeats,onChange:l}),(0,t.jsx)(x.gN,{as:j.Z,disabled:!1,name:"kilometers",label:"Kil\xf3metros",fullWidth:!0,variant:"outlined",margin:"normal",helperText:n.kilometers&&a.kilometers?(0,t.jsx)(x.Bc,{name:"kilometers"}):"",error:!!n.kilometers&&!!a.kilometers,onChange:l}),(0,t.jsx)(x.gN,{as:j.Z,disabled:!1,name:"type",label:"Tipo de combustible",fullWidth:!0,variant:"outlined",margin:"normal",helperText:n.type&&a.type?(0,t.jsx)(x.Bc,{name:"type"}):"",error:!!n.type&&!!a.type,onChange:l}),(0,t.jsx)("label",{className:"form-label",children:"Seleccionar organizaci\xf3n"}),(0,t.jsxs)("select",{className:"form-select",value:m,onChange:e=>b(e.target.value),children:[(0,t.jsx)("option",{value:"",children:"Seleccionar"}),d.map((e,r)=>(0,t.jsx)("option",{value:e.id,children:e.name},r+"company"))]})]}),(0,t.jsxs)(g.Z,{children:[(0,t.jsx)(o.Z,{type:"button",color:"primary",children:"Cancelar"}),(0,t.jsx)(o.Z,{type:"submit",color:"primary",disabled:r,children:"Guardar"})]})]})}})]})})},q=()=>{let[e,r]=(0,n.useState)([]),[a,s]=(0,n.useState)(!1),[x,p]=(0,n.useState)(),[y,f]=(0,n.useState)(""),[v,j]=(0,n.useState)(""),g=()=>{s(!0)},Z=()=>{s(!1)},N=async()=>{f("create"),p(null),g()},S=async e=>{f("view"),p(e),g()},_=async e=>{f("edit"),p(e),g()},k=async e=>{let r=e.id;try{await w(r),q(),(0,h.h4)("success","Se ha eliminado")}catch(e){(0,h.h4)("success","Error al eliminar")}};(0,n.useEffect)(()=>{q()},[]);let q=async()=>{let{data:e,state:a,error:t}=await C();console.log(e),a?r(e.data):(r([]),j(t.message))};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l.Z,{children:(0,t.jsx)("div",{className:"content__header content__boxed overlapping",children:(0,t.jsx)("div",{className:"content__wrap",children:(0,t.jsx)("div",{className:"content__header content__boxed overlapping",children:(0,t.jsxs)("div",{className:"content__wrap",children:[(0,t.jsx)("nav",{"aria-label":"breadcrumb",children:(0,t.jsx)("ol",{className:"mb-0",style:{margin:0,padding:0},children:(0,t.jsx)("li",{className:"breadcrumb-item active font",style:{listStyle:"none"},"aria-current":"page",children:(0,t.jsx)(i.Z,{sx:{fontWeight:"bolder"},mb:1,children:"VEH\xcdCULOS"})})})}),(0,t.jsx)("div",{className:"content__boxed",children:(0,t.jsx)("div",{className:"card",children:(0,t.jsx)("div",{className:"card-body flex-fill ms-md-4",children:(0,t.jsx)(b.Z,{data:e,columns:[{name:"brand",label:"Marca"},{name:"kilometers",label:"KM"},{name:"licensePlate",label:"Placas"},{name:"model",label:"Modelo"},{name:"Acciones",Label:"Acciones",options:{customBodyRenderLite:r=>{let a=e[r];return(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{className:"d-flex gap-3",children:[(0,t.jsx)(o.Z,{variant:"text",color:"primary",onClick:()=>_(a),children:(0,t.jsx)(u.Z,{})}),(0,t.jsx)(o.Z,{variant:"text",color:"primary",onClick:()=>S(a),children:(0,t.jsx)(d.Z,{})}),(0,t.jsx)(o.Z,{color:"error",onClick:()=>k(a),children:(0,t.jsx)(c.Z,{})})]})})}}}],buttons:(0,t.jsx)(o.Z,{variant:"contained",color:"primary",className:"ms-2",onClick:N,children:(0,t.jsx)(m.Z,{})})})})})})]})})})})}),(0,t.jsx)(T,{type:y,alumno:x,updateTable:q,open:a,handleClose:Z})]})};var P=(0,s.default)(q)},5336:function(e,r,a){"use strict";a.d(r,{e5:function(){return s},j1:function(){return o},r7:function(){return l}});var t=a(9234);let n="/company";async function l(){try{let e=await t.Z.get(n+"/");return{state:!0,data:e.data,error:""}}catch(e){return{state:!1,data:[],error:e}}}async function s(e){try{let r=await t.Z.post(n+"/",e);return{state:!0,data:r,error:""}}catch(e){return{state:!1,data:[],error:e}}}async function o(e,r){try{let a=await t.Z.patch(n+"/"+e,r);return{state:!0,data:a,error:""}}catch(e){return{state:!1,data:[],error:e}}}},9234:function(e,r,a){"use strict";a.d(r,{D:function(){return s}});var t=a(6154),n=a(26725);let l=t.Z.create({baseURL:n.CC,headers:{"Content-Type":"application/json"}});l.interceptors.request.use(function(e){{let r=localStorage.getItem("_token");return r&&(e.headers.Authorization="Bearer ".concat(r)),e}},function(e){return console.log("error"),Promise.reject(e)});let s=t.Z.create({baseURL:n.CC,headers:{"Content-Type":"multipart/form-data"}});s.interceptors.request.use(function(e){let r=localStorage.getItem("_token");return e.headers["Content-Type"]="multipart/form-data",r&&(e.headers["Content-Type"]="multipart/form-data",e.headers.Authorization="Bearer ".concat(r)),e},function(e){return Promise.reject(e)}),r.Z=l}},function(e){e.O(0,[664,873,376,672,95,542,44,254,774,888,179],function(){return e(e.s=38094)}),_N_E=e.O()}]);