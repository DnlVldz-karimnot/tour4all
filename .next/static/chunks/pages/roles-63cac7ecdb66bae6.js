(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[217],{20264:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/roles",function(){return a(29768)}])},52627:function(e,t,a){"use strict";var r=a(85893);a(67294);var n=a(37690),s=a(48678),i=a(98396);let l=e=>{let{data:t,columns:a,buttons:l}=e,o=(0,s.Z)();return(0,i.Z)(o.breakpoints.only("xs")),(0,i.Z)(o.breakpoints.down("sm")),(0,i.Z)(o.breakpoints.only("md")),(0,i.Z)(o.breakpoints.only("lg")),(0,i.Z)(o.breakpoints.only("xl")),(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{style:{width:"100%"},children:(0,r.jsx)(n.ZP,{title:"",data:t,columns:a,options:{textLabels:{body:{noMatch:"No se encontr\xf3 informaci\xf3n",toolTip:"Ordenar"},pagination:{next:"Siguiente",previous:"Anterior",rowsPerPage:"Filas por p\xe1gina:",displayRows:"de"},toolbar:{search:"Buscar",downloadCsv:"Descargar CSV",print:"Imprimir",viewColumns:"Vista de columnas",filterTable:"Filtro"},filter:{all:"Todos",title:"Filtros",reset:"Reestablecer"},viewColumns:{title:"Mostrar Columnas",titleAria:"Mostrar/Ocultar Columnas de tabla"},selectedRows:{text:"Filas seleccionadas",delete:"Borrar",deleteAria:"Borrar columnas seleccionadas"}},elevation:0,responsive:"simple",customToolbar:()=>(0,r.jsx)(r.Fragment,{children:l}),selectableRowsHideCheckboxes:!0}})})})};t.Z=l},29768:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return P}});var r=a(85893),n=a(52972),s=a(5235),i=a(42992),l=a(23972),o=a(67294),c=a(82175),d=a(16310),u=a(87357),m=a(50657),h=a(37645),x=a(6514),p=a(18571),f=a(88409),j=a(40044),b=a(70785),Z=a(31425),v=a(20847),y=a(35083);let g=e=>{let{selected:t,onChange:a,isdisable:n}=e,[s,i]=(0,o.useState)(t);(0,o.useEffect)(()=>{i(t)},[t]);let l=["CREATE","READ","UPDATE","DELETE"];(0,o.useEffect)(()=>{t.includes("*")&&i(l)},[]);let c=e=>{let t=s.find(t=>{if(t===e.target.name)return t}),r=[];void 0===t?(r=[...s]).push(e.target.name):r=s.filter(t=>t!==e.target.name),i(r),a(r)};return(0,r.jsx)(u.Z,{className:"row",display:"flex",gap:2,children:l.map((e,t)=>(0,r.jsx)("div",{className:"col-3",children:(0,r.jsx)(v.Z,{control:(0,r.jsx)(y.Z,{checked:s.includes(e),disabled:n,name:e,onChange:c}),label:e.charAt(0).toUpperCase()+e.slice(1)})},t))})};var C=a(45472),w=a(26725);let _=d.Ry().shape({name:d.Z_().required("Nombre requerido")}),N=e=>{let{type:t,role:a,updateTable:n,open:s,handleClose:d}=e,[v,y]=o.useState(0),[N,E]=o.useState([]);(0,o.useEffect)(()=>{console.log("Me renderice CreateEdit"),a?E(a.permissions):E([])},[]),(0,o.useEffect)(()=>{a?E(a.permissions):E([])},[a]);let k=e=>{E(e)},S=async(e,r)=>{let s={...e,id:a?a.id:"",permissions:N};try{"create"===t&&(await (0,C.fA)(s),n(),(0,w.h4)("success","Se ha creado exitosamente")),"edit"===t&&(await (0,C.ul)(a.id,s),n(),(0,w.h4)("success","Se ha actualizado")),d()}catch(e){(0,w.h4)("error","Ha sucedido un error")}};function T(e){let{children:t,value:a,index:n,...s}=e;return(0,r.jsx)("div",{role:"tabpanel",hidden:a!==n,id:"simple-tabpanel-".concat(n),"aria-labelledby":"simple-tab-".concat(n),...s,children:a===n&&(0,r.jsx)(u.Z,{sx:{p:3},children:(0,r.jsx)(l.Z,{children:t})})})}return(0,r.jsx)("div",{children:(0,r.jsxs)(m.Z,{open:s,onClose:d,maxWidth:"sm",fullWidth:!0,children:[(0,r.jsx)(h.Z,{children:"Roles"}),(0,r.jsx)(c.J9,{initialValues:{name:a?a.name:""},validationSchema:_,onSubmit:S,children:e=>{let{isSubmitting:a,errors:n,touched:s,handleChange:o}=e;return(0,r.jsxs)(c.l0,{children:[(0,r.jsxs)(x.Z,{children:[(0,r.jsx)(c.gN,{as:p.Z,disabled:"view"==t,name:"name",label:"Nombre",fullWidth:!0,variant:"outlined",margin:"normal",helperText:s.name&&n.name?(0,r.jsx)(c.Bc,{name:"name"}):"",error:!!s.name&&!!n.name,onChange:o}),(0,r.jsx)(l.Z,{className:"mt-5 mb-4",variant:"h6",children:"Permisos"}),(0,r.jsxs)(u.Z,{sx:{width:"100%"},children:[(0,r.jsx)(u.Z,{sx:{borderBottom:1,borderColor:"divider"},children:(0,r.jsx)(f.Z,{value:v,onChange:o,"aria-label":"basic tabs example",children:(0,r.jsx)(j.Z,{label:"Permisos"})})}),(0,r.jsx)(T,{value:v,index:0,children:(0,r.jsx)(b.Z,{children:(0,r.jsx)(g,{selected:N,onChange:k,isdisable:"view"==t})})})]})]}),(0,r.jsxs)(Z.Z,{children:[(0,r.jsx)(i.Z,{onClick:d,color:"primary",children:"Cancelar"}),(0,r.jsx)(i.Z,{type:"submit",color:"primary",disabled:a,children:"Guardar"})]})]})}})]})})};var E=a(52627),k=a(5863),S=a(75071),T=a(8364),R=a(41687);let A=()=>{let[e,t]=o.useState([]),[a,s]=(0,o.useState)(!1),[c,d]=(0,o.useState)(),[u,m]=(0,o.useState)(""),h=()=>{s(!0)},x=()=>{s(!1)},p=async()=>{let e=await (0,C.xJ)();t(e)};(0,o.useEffect)(()=>{p()},[]);let f=async e=>{let t=e.id;try{await (0,C.Rd)(t),p(),(0,w.h4)("success","Se ha eliminado")}catch(e){(0,w.h4)("success","Error al eliminar")}},j=async()=>{m("create"),d(null),h()},b=async e=>{m("view"),d(e),h()},Z=async e=>{m("edit"),d(e),h()};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.Z,{children:(0,r.jsx)("div",{className:"content__header content__boxed overlapping",children:(0,r.jsx)("div",{className:"content__wrap",children:(0,r.jsx)("div",{className:"content__header content__boxed overlapping",children:(0,r.jsxs)("div",{className:"content__wrap",children:[(0,r.jsx)("nav",{"aria-label":"breadcrumb",children:(0,r.jsx)("ol",{className:"mb-0",style:{margin:0,padding:0},children:(0,r.jsx)("li",{className:"breadcrumb-item active font",style:{listStyle:"none"},"aria-current":"page",children:(0,r.jsx)(l.Z,{sx:{fontWeight:"bolder"},mb:1,children:"ROLES"})})})}),(0,r.jsx)("div",{className:"content__boxed",children:(0,r.jsx)("div",{className:"card",children:(0,r.jsx)("div",{className:"card-body flex-fill ms-md-4 ",children:(0,r.jsx)(E.Z,{data:e,columns:[{name:"name",label:"Nombre"},{name:"Acciones",Label:"Acciones",options:{customBodyRenderLite:t=>{let a=e[t];return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"d-flex gap-3",children:[(0,r.jsx)(i.Z,{variant:"text",color:"primary",onClick:()=>Z(a),children:(0,r.jsx)(S.Z,{})}),(0,r.jsx)(i.Z,{variant:"text",color:"primary",onClick:()=>b(a),children:(0,r.jsx)(k.Z,{})}),(0,r.jsx)(i.Z,{color:"error",onClick:()=>f(a),children:(0,r.jsx)(T.Z,{})})]})})}}}],buttons:(0,r.jsx)(i.Z,{variant:"contained",color:"primary",className:"ms-2",onClick:j,children:(0,r.jsx)(R.Z,{})})})})})})]})})})})}),(0,r.jsx)(N,{type:u,role:c,updateTable:p,open:a,handleClose:x})]})};var P=(0,s.default)(A)},9234:function(e,t,a){"use strict";a.d(t,{D:function(){return i}});var r=a(6154),n=a(26725);let s=r.Z.create({baseURL:n.CC,headers:{"Content-Type":"application/json"}});s.interceptors.request.use(function(e){{let t=localStorage.getItem("_token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}},function(e){return console.log("error"),Promise.reject(e)});let i=r.Z.create({baseURL:n.CC,headers:{"Content-Type":"multipart/form-data"}});i.interceptors.request.use(function(e){let t=localStorage.getItem("_token");return e.headers["Content-Type"]="multipart/form-data",t&&(e.headers["Content-Type"]="multipart/form-data",e.headers.Authorization="Bearer ".concat(t)),e},function(e){return Promise.reject(e)}),t.Z=s},45472:function(e,t,a){"use strict";a.d(t,{Rd:function(){return o},fA:function(){return i},ul:function(){return l},xJ:function(){return s}});var r=a(9234);let n="/roles";async function s(){let e=await r.Z.get(n+"/");return e.data}async function i(e){let t=await r.Z.post(n+"/",e);return t.data}async function l(e,t){let a=await r.Z.put(n,t);return a.data}async function o(e){let t=await r.Z.delete(n+"/"+e);return t.data}}},function(e){e.O(0,[664,873,376,672,95,542,12,44,254,774,888,179],function(){return e(e.s=20264)}),_N_E=e.O()}]);